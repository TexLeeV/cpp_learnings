add_learning_test(test_reference_counting tests/test_reference_counting.cpp instrumentation)
add_learning_test(test_deallocation_lifetime tests/test_deallocation_lifetime.cpp instrumentation)
add_learning_test(test_aliasing_weak tests/test_aliasing_weak.cpp instrumentation)
add_learning_test(test_anti_patterns tests/test_anti_patterns.cpp instrumentation)
add_learning_test(test_smart_pointer_contrast tests/test_smart_pointer_contrast.cpp instrumentation)
add_learning_test(test_ownership_patterns tests/test_ownership_patterns.cpp instrumentation)
add_learning_test(test_allocation_patterns tests/test_allocation_patterns.cpp instrumentation)
add_learning_test(test_structural_patterns tests/test_structural_patterns.cpp instrumentation)
add_learning_test(test_collection_patterns tests/test_collection_patterns.cpp instrumentation)
add_learning_test(test_scope_lifetime_patterns tests/test_scope_lifetime_patterns.cpp instrumentation)
add_learning_test(test_self_reference_patterns tests/test_self_reference_patterns.cpp instrumentation)
add_learning_test(test_polymorphism_patterns tests/test_polymorphism_patterns.cpp instrumentation)
add_learning_test(test_singleton_registry tests/test_singleton_registry.cpp instrumentation)
add_learning_test(test_interop_patterns tests/test_interop_patterns.cpp instrumentation)
add_learning_test(test_conditional_lifetime tests/test_conditional_lifetime.cpp instrumentation)
add_learning_test(test_exercises_fill_in tests/test_exercises_fill_in.cpp instrumentation)
add_learning_test(test_asio_basics tests/test_asio_basics.cpp instrumentation Threads::Threads)
add_learning_test(test_multi_threaded_patterns tests/test_multi_threaded_patterns.cpp instrumentation Threads::Threads)

find_path(ASIO_INCLUDE_DIR asio.hpp
    PATHS /usr/include /usr/local/include
)

if(ASIO_INCLUDE_DIR)
    target_include_directories(test_asio_basics PRIVATE ${ASIO_INCLUDE_DIR})
    target_compile_definitions(test_asio_basics PRIVATE ASIO_STANDALONE)
    target_include_directories(test_multi_threaded_patterns PRIVATE ${ASIO_INCLUDE_DIR})
    target_compile_definitions(test_multi_threaded_patterns PRIVATE ASIO_STANDALONE)
endif()
